#include <stdio.h>
#include "udp.h"
#include "message.h"

// client code
int main(int argc, char *argv[]) {
    int rc;

    rc = MFS_Init("localhost", 10000);
    printf("init [%d]\n", rc);

    rc = MFS_Creat(0, MFS_REGULAR_FILE, "test");
    printf("creat file [%d]\n", rc);

    int inum = MFS_Lookup(0, "test");
    printf("lookup [%d]\n", inum);

    rc = MFS_Write(inum, "hello world", 0, MFS_BLOCK_SIZE);
    printf("write [%d]\n", rc);

    // rc = MFS_Shutdown();
    // printf("shutdown [%d]\n", rc);

    // rc = MFS_Init("localhost", 10000);
    // printf("init [%d]\n", rc);

    // inum = MFS_Lookup(0, "test");
    // printf("lookup [%d]\n", inum);

    // char *buffer = "This is a test buffer0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123This is a test buffer";
    // printf("length of buffer: %ld\n", strlen(buffer));
    // rc = MFS_Write(1, buffer, 0, strlen(buffer));
    // printf("write [%d]\n", rc);

    // char read_buffer[strlen(buffer)];
    // printf("strlen(read_buffer): %ld\n", strlen(buffer));
    // rc = MFS_Read(1, (char *) &read_buffer, 0, strlen(buffer));
    // printf("read [%d]\n", rc);
    // printf("size of read_buffer: %ld\n", sizeof(read_buffer));
    // printf("read_buffer: %s\n", read_buffer);

    // if (strcmp(read_buffer, buffer) == 0) {
    //     printf("SUCCESS!\n");
    // } else {
    //     printf("FAIL\n");
    // }

    /**

    MFS_Stat_t stat;

    rc = MFS_Stat(1, &stat);
    printf("stat [%d]\n", rc);

    */

    rc = MFS_Shutdown();
    printf("shutdown [%d]\n", rc);
    return 0;
}